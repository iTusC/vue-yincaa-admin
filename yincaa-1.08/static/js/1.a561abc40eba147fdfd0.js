webpackJsonp([1],{Wlhp:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=i("lC5x"),s=i.n(e),l=i("J0Oq"),n=i.n(l),o=i("SLVL"),r=i("UEcT"),d=i("1h8J"),c={data:function(){return{lodi:!0,isshow:!0,lng:null,lat:null,infoD:"",infoNP:"",infoTW:"",infoWT:"",infoL:"",zoom:14,tableDataAlarms:[],infotext:"",imgSrc:"",messageisshow:!1,imagesisshow:!1,messagesrc:"",messagesrctitle:"",imagesList:[],atpyePName:"-",atpyeName:"-",startDate:"-",endDate:"-",longitude:"-",latitude:"-",deriverName:"-",vehicleCode:"黄色",teamName:"-",locationDesc:"广东省广州市荔湾区员村街道三元里抗英斗争纪念公园",vehicleId:"YY-CM-7694",color:"红色",sex:"-",birthday:"-",vehicleType:"-",terminalNo:"018038863254",speed:"70KM/h",altitude:"209m",subordinate:"粤运综合物流有限公司",issuingAuthority:"广东省公安厅交通管理局",licensePlateType:"黄色",VehicleModel:"普通",carIndustry:"道路货物运输",creationTime:"2018-4-5",licenseNumber:"01803883977522",validPeriod:"2019-3-18",listId:"-",dataMonday:"-",dataSunday:"-",tableDatas:[],currentN:0,listData:[],companyId:"",videos:"",videoShow:!1,upAlarmNo:"",alarmNo:"",downAlarmNo:"",alarm:"",col:!1,centerDialogVisible:!1,dialogText:"",atypeParent:""}},methods:{coninfo:function(t,a){this.isshow=!0,this.lng=this.listData.detailMap.longitude,this.lat=this.listData.detailMap.latitude,this.infotext="this.markers[i].text"},handler:function(t){t.BMap,t.map},draw:function(t){var a=t.el,i=t.BMap,e=t.map.pointToOverlayPixel(new i.Point(this.lng,this.lat));a.style.left=e.x-60+"px",a.style.top=e.y-20+"px"},isinfo:function(t){},close:function(){this.isshow=!1},zommImages:function(t){this.messageisshow=!0,this.imagesisshow=!0,this.messagesrc=t.srcElement.currentSrc,this.messagesrctitle=t.srcElement.alt},closeMessageBox:function(){this.imagesisshow=!1,this.messageisshow=!1},onSearch:function(){var t=this.$loading({lock:!0,text:"加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",target:document.querySelector(".detail-main")});setTimeout(function(){t.close()},2e3)},onNext:function(){""!==this.downAlarmNo&&this.currentN<10?(this.lodi=!0,this.getDetailPageData({alarmNo:this.downAlarmNo,companyId:this.companyId,startDate:this.dataMonday,endDate:this.dataSunday,atypeParent:this.atypeParent,currentNo:this.currentN++,upAlarmNo:this.alarmNo})):(this.dialogText="最后一页了！",this.centerDialogVisible=!0)},setCookie:function(t,a,i,e,s,l){var n=new Date;n.setTime(n.getTime()+864e5*exdays),window.document.cookie="companyName="+c_name+";path=/;expires="+n.toGMTString(),window.document.cookie="companyId="+c_id+";path=/;expires="+n.toGMTString(),window.document.cookie="imgPath="+c_path+";path=/;expires="+n.toGMTString()},onPrevious:function(){""!==this.upAlarmNo&&this.currentN>0?(this.lodi=!0,this.getDetailPageData({alarmNo:this.upAlarmNo,companyId:this.companyId,startDate:this.dataMonday,endDate:this.dataSunday,currentNo:this.currentN--,downAlarmNo:this.downAlarmNo})):(this.dialogText="第一页了！",this.centerDialogVisible=!0)},back:function(){this.$router.go(-1)},getDetailPageData:function(t){var a=this;return n()(s.a.mark(function i(){var e,l,n,o,r;return s.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(d.d)(t);case 2:e=i.sent,l=e.data,n=[],0==l.code&&(o=a,r=new BMap.Geocoder,r.getLocation(new BMap.Point(l.data.alarmInfoDto.longitude,l.data.alarmInfoDto.latitude),function(t){t&&(o.locationDesc=t.address,o.infoL=t.address)}),a.alarm=l.data,a.atpyePName=l.data.alarmInfoDto.atypeChildname,a.atpyeName=l.data.alarmInfoDto.atypeParentName,a.longitude=l.data.alarmInfoDto.longitude,a.latitude=l.data.alarmInfoDto.latitude,a.startDate=l.data.alarmInfoDto.alarmTime,a.endDate=l.data.alarmInfoDto.receiptTime,a.terminalNo=l.data.alarmInfoDto.commNo,a.altitude=l.data.alarmInfoDto.elevetion,a.speed=l.data.alarmInfoDto.speed,a.birthday=l.data.driverInfoDto.birthday,a.issuingAuthority=l.data.driverInfoDto.certOrg,a.vehicleType=l.data.driverInfoDto.ctfType,a.licenseNumber=l.data.driverInfoDto.driverLicense,a.deriverName=l.data.driverInfoDto.driverName,a.deriverId=l.data.driverInfoDto.driverNo,a.sex=l.data.driverInfoDto.sex,a.validPeriod=l.data.driverInfoDto.validEndTime,a.issuingAuthority=l.data.vehicleInfoDto.certOrgName,a.subordinate=l.data.vehicleInfoDto.companyName,a.carIndustry=l.data.vehicleInfoDto.industryName,a.licensePlateType=l.data.vehicleInfoDto.numberKindName,a.teamName=l.data.vehicleInfoDto.teamName,a.vehicleId=l.data.vehicleInfoDto.vehicleId,a.vehicleCode=l.data.vehicleInfoDto.vehicleCode,a.creationTime=l.data.vehicleInfoDto.vehicleCreateTime,a.color=l.data.vehicleInfoDto.vehiclePlateColor,a.lng=l.data.alarmInfoDto.longitude,a.lat=l.data.alarmInfoDto.latitude,a.infoD=l.data.driverInfoDto.driverName,a.infoNP=l.data.vehicleInfoDto.vehicleCode,a.infoTW=l.data.alarmInfoDto.atypeParentName,a.infoWT=l.data.alarmInfoDto.alarmTime,l.data.multimediaFiles.forEach(function(t){0==t.fileType?n.push("http://47.106.196.228:8888/"+t.filePath):2==t.fileType&&(a.videos="http://47.106.196.228:8888/"+t.filePath)}),a.imagesList=n,a.videoShow=!0,l.data.upAlarmNo?(a.upAlarmNo=l.data.upAlarmNo,a.alarmNo=l.data.currentNo,a.downAlarmNo=l.data.downAlarmNo):l.data.downAlarmNo?(a.alarmNo=l.data.currentNo,a.downAlarmNo=l.data.downAlarmNo):(a.upAlarmNo=l.data.upAlarmNo,a.alarmNo=l.data.currentNo)),a.lodi=!1,l=null;case 8:case"end":return i.stop()}},i,a)}))()}},mounted:function(){},created:function(){console.log(this.$route.params.tableDatas),this.listId=this.$route.params.id,this.currentN=this.listId.index,this.dataMonday=this.$route.params.dataMonday,this.dataSunday=this.$route.params.dataSunday,this.tableDatas=this.$route.params.tableDatas,this.companyId=this.$route.params.companyIds,this.atypeParent=this.$route.params.atypeParent,this.getDetailPageData({alarmNo:this.listId.id,companyId:this.companyId,vehicleId:this.tableDatas.vehicleId,driverId:this.tableDatas.deriveId,startDate:this.dataMonday,endDate:this.dataSunday,atypeParent:this.atypeParent,currentNo:this.listId.index})},watch:{$route:function(){this.listId=this.$route.params.id,this.dataMonday=this.$route.params.dataMonday,this.dataSunday=this.$route.params.dataSunday,this.tableDatas=this.$route.params.tableDatas,this.companyId=this.$route.params.companyIds,this.atypeId=this.$route.params.atypeId}},components:{BmlMarkerClusterer:o.BmlMarkerClusterer,MapBox:r.a}},v={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("el-scrollbar",{staticClass:"yc-scrollbar",staticStyle:{height:"100%"}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.lodi,expression:"lodi"}],staticClass:"detail-main"},[i("div",{staticClass:"detail-m"},[i("baidu-map",{staticClass:"map",attrs:{center:"广州","scroll-wheel-zoom":!0,"map-click":!1,center:{lng:t.lng,lat:t.lat},zoom:t.zoom}},[i("bm-geolocation",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",showAddressBar:!0,autoLocation:!0}}),t._v(" "),i("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_TOP_RIGHT"}}),t._v(" "),i("bm-map-type",{attrs:{"map-types":["BMAP_NORMAL_MAP","BMAP_HYBRID_MAP"],anchor:"BMAP_ANCHOR_TOP_LEFT"}}),t._v(" "),i("bm-traffic",{attrs:{predictDate:{weekday:7,hour:12}}}),t._v(" "),i("bml-marker-clusterer",{attrs:{averageCenter:!0}},[i("bm-marker",{attrs:{position:{lng:t.lng,lat:t.lat},zoom:t.zoom}})],1),t._v(" "),i("map-box",{attrs:{position:{lng:t.lng,lat:t.lat}}},[i("p",{staticClass:"info"},[t._v("驾驶员："+t._s(t.infoD))]),t._v(" "),i("p",{staticClass:"info"},[t._v("车牌号："+t._s(t.infoNP))]),t._v(" "),i("p",{staticClass:"info"},[t._v("报警时间："+t._s(t.infoWT))]),t._v(" "),i("p",{staticClass:"info"},[t._v("报警类型："+t._s(t.infoTW))]),t._v(" "),i("p",{staticClass:"info"},[t._v("报警地点："+t._s(t.infoL))])])],1),t._v(" "),i("aside",{staticClass:"page-turning"},[i("div",{staticClass:"pages-next",on:{click:t.back}},[i("i",{staticClass:"el-icon-back"}),i("span",[t._v(" 返回列表")])]),t._v(" "),i("div",{staticClass:"pages-next",on:{click:t.onNext}},[i("span",[t._v("下一条预警")]),i("i",{staticClass:"el-icon-arrow-right"})]),t._v(" "),i("div",{staticClass:"pages-prea",on:{click:t.onPrevious}},[i("i",{staticClass:"el-icon-arrow-left",style:t.col?t.color="#fff":t.color="#333"}),i("span",[t._v("上一条预警")])])]),t._v(" "),i("div",{staticClass:"detail-main-info"},[i("section",{staticClass:"detail-page-main border-bottom"},[i("article",{staticClass:"detail-main-warning"},[i("h3",[t._v("预警信息(编号"+t._s(t.alarmNo)+")")]),t._v(" "),i("ul",{staticClass:"detail-warning-del"},[i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("预警类别")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.atpyeName))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("预警子类型")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.atpyePName))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("预警时间")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.startDate))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("平台接收时间")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.endDate))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("终端机手机号")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.terminalNo))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("经纬度")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.longitude+"-"+t.latitude))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("海拔高度")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.altitude))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("当前车速")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.speed))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("驾驶员")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.deriverName))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("车牌号")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.vehicleCode))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("所属车队")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.teamName))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("从属公司")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.subordinate))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("预警地点")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.locationDesc))])])]),t._v(" "),i("article",{staticClass:"detail-main-photo"},[i("h4",{staticClass:"detail-warning-title"},[t._v("预警照片")]),t._v(" "),i("ul",t._l(t.imagesList,function(a,e){return i("li",{key:e},[i("img",{staticClass:"detail-main-images",attrs:{src:a},on:{click:function(a){if(a.target!==a.currentTarget)return null;t.zommImages(a)}}})])}))]),t._v(" "),i("article",{staticClass:"detail-main-video"},[i("h4",{staticClass:"detail-warning-title"},[t._v("预警视频")]),t._v(" "),t.videoShow?i("video",{staticClass:"detail-warning-video",attrs:{controls:"",name:"media"},on:{click:function(t){if(t.target!==t.currentTarget)return null}}},[i("source",{attrs:{src:t.videos,type:"video/mp4"}})]):t._e()])])]),t._v(" "),i("section",{staticClass:"detail-page-main border-bottom"},[i("article",{staticClass:"detail-main-warning"},[i("h3",[t._v("车辆信息")]),t._v(" "),i("ul",[i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("车辆ID")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.vehicleId))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("车牌号")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.vehicleCode))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("车牌种类")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.licensePlateType))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("发证机关")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.issuingAuthority))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("车辆颜色")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.color))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("车辆类型")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.VehicleModel))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("车属行业")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.carIndustry))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("车辆创建时间")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.creationTime))])])])])]),t._v(" "),i("section",{staticClass:"detail-page-main"},[i("article",{staticClass:"detail-main-warning"},[i("h3",[t._v("驾驶员信息")]),t._v(" "),i("ul",[i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("驾驶员ID")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.deriverId))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("驾驶员姓名")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.deriverName))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("性别")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s("m"==t.sex?"男":"女"))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("生日")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.birthday))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("驾驶证编号")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.licenseNumber))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("驾驶证类型")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.vehicleType)+"照")])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("发证机关")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.issuingAuthority))])]),t._v(" "),i("li",[i("span",{staticClass:"detail-warning-title"},[t._v("有效期止")]),t._v(" "),i("p",{staticClass:"detail-warnig-text"},[t._v(t._s(t.validPeriod))])])])])])])],1),t._v(" "),t.messageisshow?i("div",{staticClass:"message-box"},[i("div",{staticClass:"message-box-bg",on:{click:function(a){return a.target!==a.currentTarget?null:t.closeMessageBox(a)}}}),t._v(" "),i("div",{staticClass:"message-main"},[i("span",{staticClass:"message-close el-icon-close",on:{click:function(a){return a.target!==a.currentTarget?null:t.closeMessageBox(a)}}}),t._v(" "),i("div",{staticClass:"block"},[i("el-carousel",{attrs:{trigger:"click",height:"576px",autoplay:!1}},t._l(t.imagesList,function(a){return i("el-carousel-item",{key:a},[t.imagesisshow?i("img",{staticClass:"mes-images",attrs:{src:a,alt:t.messagesrctitle}}):t._e()])}))],1)])]):t._e(),t._v(" "),i("el-dialog",{staticClass:"dialog",attrs:{title:"提示",visible:t.centerDialogVisible,width:"20%",center:""},on:{"update:visible":function(a){t.centerDialogVisible=a}}},[i("span",{staticStyle:{display:"inline-block",width:"100%","text-align":"center","font-size":"14px",color:"#666"}},[t._v(t._s(t.dialogText))])])],1)])},staticRenderFns:[]};var m=i("Z0/y")(c,v,!1,function(t){i("gc/7")},"data-v-9b5fb7fe",null);a.default=m.exports},"gc/7":function(t,a){}});